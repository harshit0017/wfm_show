<!-- 🔥 Interviews Landed Counter Widget -->
<style>
  .counter-card {
    max-width: 240px;
    margin: 2rem auto;
    padding: 1.5rem;
    background: #ffffff;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont,
      'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',
      'Helvetica Neue', sans-serif;
  }
  .counter-icon {
    font-size: 2.5rem;
    animation: pulse 1.5s infinite;
    margin-bottom: 0.5rem;
    display: inline-block;
  }
  .counter-label {
    font-size: 0.9rem;
    font-weight: 600;
    color: #555555;
    margin-bottom: 0.25rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .counter-value {
    font-size: 2.5rem;
    font-weight: bold;
    color: #2c3e50;
    min-height: 1em;
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50%      { transform: scale(1.2); }
  }
</style>

<div class="counter-card">
  <div class="counter-icon">🔥</div>
  <div class="counter-label">Interviews Landed</div>
  <div id="interview-count" class="counter-value">0</div>
</div>

<script>
  (async function() {
    const API_URL = 'http://34.220.144.31:3000/api/notion'; // ← your endpoint

    try {
      const res = await fetch(API_URL);
      if (!res.ok) throw new Error(res.statusText);
      const { results } = await res.json();
      const total = Array.isArray(results) ? results.length : 0;

      // Smooth count-up animation
      const el = document.getElementById('interview-count');
      const duration = 800;              // total animation time in ms
      const frameRate = 60;              // frames per second
      const totalFrames = Math.round((duration / 1000) * frameRate);
      let frame = 0;
      const counter = setInterval(() => {
        frame++;
        const progress = frame / totalFrames;
        const current = Math.round(total * progress);
        el.textContent = current;
        if (frame === totalFrames) {
          clearInterval(counter);
          el.textContent = total;        // ensure exact final value
        }
      }, duration / totalFrames);

    } catch (err) {
      console.error('Error loading interview count:', err);
      document.getElementById('interview-count').textContent = '—';
    }
  })();
</script>
